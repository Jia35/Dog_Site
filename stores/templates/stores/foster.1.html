{% extends 'stores/base.html' %}

{% block title %}å¯„é¤Š | {{ block.super }}{% endblock title %}

{% block head %}
{{ block.super }}
    <!--link rel="stylesheet" href="http://code.jquery.com/ui/1.10.4/themes/ui-lightness/jquery-ui.css">
    <script src="http://code.jquery.com/ui/1.10.4/jquery-ui.js"></script-->
{% endblock head %}

{% block navbar %}
{{ block.super }}
<ul class="navbar-nav mr-auto">
    <li class="nav-item">
        <a class="nav-link" href="{% url 'home' %}"><strong>é¦–é </strong> <span class="sr-only">(current)</span></a>
    </li>
    <li class="nav-item active">
        <a class="nav-link disabled" href="{% url 'foster' %}"><strong>å¯„é¤Š</strong></a>
    </li>
    <li class="nav-item">
        <a class="nav-link disabled" href="{% url 'message' %}"><strong>æ¶ˆæ¯</strong></a>
    </li>
    <li class="nav-item">
        <a class="nav-link disabled" href="{% url 'mine' %}"><strong>ä½¿ç”¨è€…</strong></a>
        <!--http://iotpetcare.byethost33.com/IOT/user_displacement.html-->
    </li>
</ul>
{% endblock navbar %}

{% block body %}
{{ block.super }}
<div class="introduce-bg2 introduce-mid">
    <h1><span class="badge badge-secondary">å¯„é¤Š</span></h1>

    <h3>ç”¨æˆ¶åˆ—è¡¨</h3>
    <h5><I>é»æ“Šç¬‘è‡‰ï¼Œå¯å¯Ÿçœ‹è©³ç´°è³‡è¨Šï¼Œä½†ç›®å‰é¡¯ç¤ºå°šæœ‰å°bug</I></h5>
    <!--form action="" method="post">
    {% csrf_token %}
        <input type="text" name="searchUser" value="" size="3">
        <button type="submit" name="searchButton">æœå°‹</button>
    </form-->

    <table class="table table-bordered table-hover table-condensed">
        <tr>
            <th>è³‡è¨Š</th>
            <th>ç…§ç‰‡</th>
            <th>å§“å</th>
            <th>æ€§åˆ¥</th>
            <!--th>é›»è©±</th-->
            <th>ä½å€</th>
            <!--th>ä½å®¶ç’°å¢ƒ</th-->
            <!--th>è¨­æ–½</th-->
            <th>è©•åˆ†</th>
            <th>è©•åƒ¹</th>
            <!--th>åŠ å…¥æ—¥æœŸ</th-->
        </tr>
        {% for user in alluser %}
            <tr>
                <td style="cursor: pointer;" onclick = "showAlert( '{{ user.name }}' );"> ğŸ˜ƒ </td>
                <td> <img src='/media/{{ user.picture }}' width="80" alt="user_pictures"/> </td>
                <td> {{ user.name }} </td>
                <td> {{ user.gender }} </td>
                <!--td> {{ user.phone_number }} </td-->
                <td> {{ user.residential_location }} </td>
                <!--td> {{ user.housing_condition }} </td-->
                <!--td> {{ user.equipment }} </td-->
                <td> {{ user.score }} </td>
                <td> {{ user.evaluation }} </td>
            </tr>
        {% endfor %} 
    </table>


    <div id="dialog_1" title="å€‹äººè³‡è¨Š...">
        <table class="table table-bordered table-hover table-condensed">
            <tr>
                <th>å§“å</th>
                <th>æ€§åˆ¥</th>
                <th>é›»è©±</th>
                <th>ä½å€</th>
                <th>ä½å®¶ç’°å¢ƒ</th>
                <th>è¨­æ–½</th>
                <th>è©•åˆ†</th>
                <th>è©•åƒ¹</th>
            </tr>
            <tr>
                <td id="html_name"></td>
                <td id="html_gender"></td>
                <td id="html_phone_number"></td>
                <td id="html_residential_location"></td>
                <td id="html_housing_condition"></td>
                <td id="html_equipment"></td>
                <td id="html_score"></td>
                <td id="html_evaluation"></td>
            </tr>
        </table>
    </div>
</div>

{% endblock body %}


{% block script %}
{{ block.super }}
<script type="text/javascript">
    var allusers = {{allusers|safe}};
    
    $(function() {
        $( "#dialog_1" ).dialog({
            autoOpen: false,
            //modal: true,
            show: {
                effect:'clip',
                duration: 300,
            },
            hide: {
                effect:'clip',
                duration: 300,
            },
            buttons: {
                "è¯ç¹«ä¸»äºº": function () {
                    location.href="/message/";
                },
                Close: function () {
                    $(this).dialog("close");
                }
            },
            width: '60vw',
            height: 'auto',
            resizable: false,
        });
    });
    function showAlert(user)
    {
        $( "#dialog_1" ).dialog( "open" );
        //document.getElementById("dialog_1").textContent = user;
        
        var clickUser = allusers.find(function(item, index, array){
            return item.name == user;
        });
        
        document.getElementById("html_name").textContent = clickUser.name;
        document.getElementById("html_gender").textContent = clickUser.gender;
        document.getElementById("html_phone_number").textContent = clickUser.phone_number;
        document.getElementById("html_residential_location").textContent = clickUser.residential_location;
        document.getElementById("html_housing_condition").textContent = clickUser.housing_condition;
        document.getElementById("html_equipment").textContent = clickUser.equipment;
        document.getElementById("html_score").textContent = clickUser.score;
        document.getElementById("html_evaluation").textContent = clickUser.evaluation;
        //console.log(clickUser)

    }

</script>



{% endblock script %}
